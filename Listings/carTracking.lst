C51 COMPILER V9.54   CARTRACKING                                                           11/19/2024 20:31:43 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE CARTRACKING
OBJECT MODULE PLACED IN .\Objects\carTracking.obj
COMPILER INVOKED BY: D:\mcu\Keil5\C51\BIN\C51.EXE carTracking.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\carTracking.lst) OBJECT(.\Objects\carTracking.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <intrins.h>
   3          #include "carMovement.h"
   4          
   5          sbit Left_0 =   P3^7;
   6          sbit Left_1 =   P3^6;
   7          sbit Left_2 =   P3^5;
   8          sbit Middle_0 = P3^4; 
   9          sbit Middle_1 = P1^3; 
  10          sbit Right_0 =  P1^2;
  11          sbit Right_1 =  P1^1;
  12          sbit Right_2 =  P1^0;
  13          
  14          unsigned char valueState = 0;
  15          unsigned char previousStates = 0;
  16          
  17          void Delay100ms(void)
  18          {
  19   1              unsigned char data i, j;
  20   1      
  21   1              i = 180;
  22   1              j = 73;
  23   1              do
  24   1              {
  25   2                      while (--j);
  26   2              } while (--i);
  27   1      }
  28          
  29          
  30          //黑线是1，白线是0
  31          void ChangeState() //调整小车冲出赛道的状态
  32          {
  33   1          if (previousStates == 0)
  34   1          {
  35   2              carMoveBackward();
  36   2          }
  37   1          else if (previousStates == 1)
  38   1          {
  39   2              carSharpRight(); //我不确定SharpRight是不是有点太sharp了
  40   2          }
  41   1          else if (previousStates == 2)
  42   1          {
  43   2              carSharpLeft();
  44   2          }
  45   1      }
  46          
  47          void Tracking()
  48          {
  49   1          //左边检查到黑线，但是右边nil
  50   1          if ((Left_0 == 1 || Left_1 == 1 || Left_2 == 1 || Middle_0 == 1) && (Right_0 == 0 && Right_1 == 0 && R
             -ight_2 == 0 && Middle_1 == 0))
  51   1          {
  52   2              if (Left_0 == 1)
  53   2              {
C51 COMPILER V9.54   CARTRACKING                                                           11/19/2024 20:31:43 PAGE 2   

  54   3                  carSharpLeft();
  55   3              }
  56   2              else if (Left_1 == 1)
  57   2              {
  58   3                  Fliping = 1;
  59   3                  carTurnLeft(3);
  60   3              }
  61   2              else if (Left_2 == 1)
  62   2              {
  63   3                  Fliping = 0;
  64   3                  carTurnLeft(2);
  65   3              }
  66   2              else if (Middle_0 == 1)
  67   2              {
  68   3                  Fliping = 0;
  69   3                  carTurnLeft(1);
  70   3              }
  71   2          }
  72   1          //右边检查到黑线，但是左边是nil
  73   1          else if ( (Left_0 == 0 && Left_1 == 0 && Left_2 == 0 && Middle_0 == 0) && (Right_0 == 1 || Right_1 == 
             -1 || Right_2 == 1 || Middle_1 == 1))
  74   1          {
  75   2              if (Right_0 == 1)
  76   2              {
  77   3                  carSharpRight();
  78   3              }
  79   2              else if (Right_1 == 1)
  80   2              {
  81   3                  Fliping = 0;
  82   3                  carTurnRight(2);
  83   3              }
  84   2              else if (Right_2 == 1)
  85   2              {
  86   3                  Fliping = 1;
  87   3                  carTurnRight(3);
  88   3              }
  89   2              else if (Middle_1 == 1)
  90   2              {
  91   3                  Fliping = 0;
  92   3                  carTurnRight(1);
  93   3              }
  94   2          }
  95   1          else if ((Left_0 == 1 && Left_1 == 1 && Left_2 == 1 && Middle_0 == 1 && Middle_1 == 1 && Right_0 == 1 
             -&& Right_1 == 1 && Right_2 == 1) || (Middle_0 == 1 && Middle_1 == 1) || (Middle_0 == 1 && Middle_1 == 1 && Left_2 == 1 &
             -& Right_0 == 1) || (Middle_0 == 1 && Middle_1 == 1 && Left_2 == 1 && Left_1 == 1 && Right_0 == 1 && Right_2 == 1))
  96   1          { 
  97   2              carMoveForward(1); //暴力直走
  98   2          }
  99   1          else if ((Left_0 == 0 && Left_1 == 0 && Left_2 == 0 && Middle_0 == 0 && Middle_1 == 0 && Right_0 == 0 
             -&& Right_1 == 0 && Right_2 == 0))
 100   1          {
 101   2              ChangeState(); //sb小车冲出赛道了 用函数调整一下
 102   2          }
 103   1          else
 104   1          {
 105   2              //什么情况？我也不知道要干什么 你自己看着办吧
 106   2          }
 107   1          
 108   1      
 109   1          if (valueState != States)   /*记忆上一次的状态*/
 110   1          {
 111   2              previousStates = valueState;
C51 COMPILER V9.54   CARTRACKING                                                           11/19/2024 20:31:43 PAGE 3   

 112   2              valueState = States;
 113   2          }
 114   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    285    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
